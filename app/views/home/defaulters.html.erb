<div class="row">
    <div class="col-md-6">
        <h1>Listing all Defaulters</h1>
    </div>
    <%= form_tag :controller => :payments, :action => :export do %>
      <%= submit_tag "Download in Excel", class: "btn btn-primary pull-right", id: "export" %>
    <% end %>
    <div class="col-md-6">
        <p></p>
        <%= form_for payments_path, method: "get",layout: :horizontal do |f| %>
            <div class="field">
                <label>Filter Defaulters for: </label>
                <select class="" onchange="this.form.submit()" name="month">
                    <option>January</option>
                    <option>February</option>
                    <option>March</option>
                    <option>April</option>
                    <option>May</option>
                    <option>June</option>
                    <option>July</option>
                    <option>August</option>
                    <option>September</option>
                    <option>October</option>
                    <option>November</option>
                    <option>December</option>
                </select>
            </div>
            <div class="actions">
                <%= f.submit "Filter", class: "btn btn-success" %>
            </div>
        <% end %>
    </div>
</div>

<table class="table table-hover">
  <thead>
    <tr>
      <th>Name</th>
      <th>Admission Number</th>
      <th>Class</th>
      <th>Month</th>
    </tr>
  </thead>
  <tbody>
    <% if @param_def.present? %>
        <% @param_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td><%= @params %></td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @jan_def.present? %>
        <% @jan_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>January</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @feb_def.present? %>
        <% @feb_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>February</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @mar_def.present? %>
        <% @mar_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>March</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @apr_def.present? %>
        <% @apr_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>April</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @may_def.present? %>
        <% @may_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>May</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @jun_def.present? %>
        <% @jun_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>June</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @jul_def.present? %>
        <% @jul_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>July</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @aug_def.present? %>
        <% @aug_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>August</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @sept_def.present? %>
        <% @sept_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>September</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @oct_def.present? %>
        <% @oct_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>October</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @nov_def.present? %>
        <% @nov_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>November</td>
        </tr>
        <% end %>
    <% end %>
    
    <% if @dec_def.present? %>
        <% @dec_def.each do |defaulter| %>
        <tr>
          <th scope="row"><%= defaulter.name %></th>
          <td><%= defaulter.admission_number %></td>
          <td><%= defaulter.section.name %></td>
          <td>December</td>
        </tr>
        <% end %>
    <% end %>
    
  </tbody>
</table>

<script>
    $("#month").onchange(){
        $('#filter').submit();
    }
</script>